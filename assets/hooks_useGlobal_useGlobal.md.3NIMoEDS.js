import{D as n,o as l,c as t,I as i,R as p,k as a,a as h}from"./chunks/framework.v-2CxGd7.js";const e=p(`<h1 id="useglobal" tabindex="-1">useGlobal <a class="header-anchor" href="#useglobal" aria-label="Permalink to &quot;useGlobal&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">适用于 <code>Vue3</code>、<code>Nuxt3</code>、<code>HTML</code></p><p>获取已经注册的全局属性对象 <a href="https://cn.vuejs.org/api/application.html#app-config-globalproperties" target="_blank" rel="noreferrer">globalProperties</a></p></div><p><code>useGlobal</code>只做两件事，第一快速提取<code>globalProperties</code>，第二更方便、明确的类型提示</p><h4 id="既然想获取全局globalproperties-肯定要先注册它呀-第一步" tabindex="-1">既然想获取全局<code>globalProperties</code>，肯定要先注册它呀（第一步） <a class="header-anchor" href="#既然想获取全局globalproperties-肯定要先注册它呀-第一步" aria-label="Permalink to &quot;既然想获取全局\`globalProperties\`，肯定要先注册它呀（第一步）&quot;">​</a></h4><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ciEJ9" id="tab-9f04fjV" checked="checked"><label for="tab-9f04fjV">Vue3</label><input type="radio" name="group-ciEJ9" id="tab-K13MXCY"><label for="tab-K13MXCY">Nuxt3</label></div><div class="blocks"><div class="language-ts vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-dark min-light vp-code"><code><span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">// main.ts</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">import</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> { </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">type</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> App</span><span style="--shiki-dark:#BBBBBB;--shiki-light:#212121;">,</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> createApp } </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">from</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;"> &quot;vue&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">import</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> App </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">from</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;"> &quot;./App.vue&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">import</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;"> *</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;"> as</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> echarts </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">from</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;"> &quot;echarts&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;"> app</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;"> =</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> createApp</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">(App);</span></span>
<span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">// 这里我们就以注册$echarts为例</span></span>
<span class="line"><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">app</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">config</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">globalProperties</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.$echarts </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">=</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> echarts;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">app</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">.mount</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;">&quot;#app&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">);</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-dark min-light vp-code"><code><span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">// plugins/config.ts</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">import</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;"> *</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;"> as</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> echarts </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">from</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;"> &quot;echarts&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">export</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;"> default</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> defineNuxtPlugin</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">(nuxtApp </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">=&gt;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> {</span></span>
<span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">  // 这里我们就以注册$echarts为例</span></span>
<span class="line"><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">  nuxtApp</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">vueApp</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">config</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">globalProperties</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">.$echarts </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">=</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> echarts;</span></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">});</span></span></code></pre></div></div></div><h4 id="全局类型声明-第二步" tabindex="-1">全局类型声明（第二步） <a class="header-anchor" href="#全局类型声明-第二步" aria-label="Permalink to &quot;全局类型声明（第二步）&quot;">​</a></h4><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-dark min-light vp-code"><code><span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">// global.d.ts</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">import</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;"> type</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> { ECharts } </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">from</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;"> &quot;echarts&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">// 在 declare global 中声明后项目中所有组件实例都能访问到全局属性对象的类型</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">declare</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> global {</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">  interface</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> GlobalPropertiesApi</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">    $echarts</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">:</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> ECharts</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"><span style="--shiki-dark:#6B737C;--shiki-light:#C2C3C5;">    // ... 填写其他的全局属性类型</span></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">  }</span></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">}</span></span></code></pre></div><h4 id="在组件中使用它-第三步即最后一步" tabindex="-1">在组件中使用它（第三步即最后一步） <a class="header-anchor" href="#在组件中使用它-第三步即最后一步" aria-label="Permalink to &quot;在组件中使用它（第三步即最后一步）&quot;">​</a></h4><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes min-dark min-light vp-code"><code><span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">&lt;</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;">script</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setup</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> lang</span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">=</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;">&quot;ts&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">import</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> { useGlobal } </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">from</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;"> &quot;@pureadmin/utils&quot;</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">const</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> { </span><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">$echarts</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> } </span><span style="--shiki-dark:#F97583;--shiki-light:#D32F2F;">=</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> useGlobal</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">&lt;</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">GlobalPropertiesApi</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#79B8FF;--shiki-light:#1976D2;">console</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">.log</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;">&quot;$echarts&quot;</span><span style="--shiki-dark:#BBBBBB;--shiki-light:#212121;">,</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;"> $echarts);</span></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">&lt;/</span><span style="--shiki-dark:#FFAB70;--shiki-light:#22863A;">script</span><span style="--shiki-dark:#B392F0;--shiki-light:#24292EFF;">&gt;</span></span></code></pre></div><h5 id="获得类型提示-如下图" tabindex="-1">获得类型提示，如下图 <a class="header-anchor" href="#获得类型提示-如下图" aria-label="Permalink to &quot;获得类型提示，如下图&quot;">​</a></h5>`,10),k=a("h5",{id:"获得实例的属性和方法-如下图",tabindex:"-1"},[h("获得实例的属性和方法，如下图 "),a("a",{class:"header-anchor",href:"#获得实例的属性和方法-如下图","aria-label":'Permalink to "获得实例的属性和方法，如下图"'},"​")],-1),c=JSON.parse('{"title":"useGlobal","description":"","frontmatter":{},"headers":[],"relativePath":"hooks/useGlobal/useGlobal.md","filePath":"hooks/useGlobal/useGlobal.md","lastUpdated":1704870835000}'),F={name:"hooks/useGlobal/useGlobal.md"},y=Object.assign(F,{setup(r){return(d,o)=>{const s=n("preview-image");return l(),t("div",null,[e,i(s,{imgSrc:"/echarts1.jpg"}),k,i(s,{imgSrc:"/echarts2.jpg"})])}}});export{c as __pageData,y as default};
